---
title: Window.getSelection
slug: Web/API/Window/getSelection
translation_of: Web/API/Window/getSelection
---
<div>{{ ApiRef() }}</div>



<p><span style="line-height: 1.5;">返回一个 </span>{{domxref("Selection")}}<span style="line-height: 1.5;"> 对象，</span>表示用户选择的文本范围或光标的当前位置。</p>

<h2 id="Syntax" name="Syntax">语法</h2>

<pre class="syntaxbox notranslate"><em>const selection</em> = <em>window</em>.getSelection() ;</pre>

<ul>
 <li><code>selection</code> 是一个 {{domxref("Selection")}} 对象。 如果想要将 <code>selection</code> 转换为字符串，可通过连接一个空字符串（""）或使用 {{jsxref("String.toString()")}} 方法。</li>
</ul>

<h2 id="Example" name="Example">示例</h2>

<pre class="brush:js notranslate">function foo() {
    let selObj = window.getSelection();
    console.log(selObj);
    let selRange = selObj.getRangeAt(0);
    // 其他代码
}</pre>

<h2 id="备注">备注</h2>

<p>在  JavaScript中，当一个对象被传递给期望字符串作为参数的函数中时（如 {{ Domxref("window.alert") }} 或 {{ Domxref("document.write") }}），对象的{{jsxref("Object.toString","toString()")}}方法会被调用，然后将返回值传给该函数。</p>

<p>在上例中，<code>selObj.toString()</code> 会在传递到 {{domxref("window.alert()")}}时自动调用。然而，当你试图在 {{domxref("Selection")}} 对象上使用一个 JavaScript 的{{jsxref("Global_Objects/String", "String")}} 对象上的属性或者方法时（如 {{jsxref("String.prototype.length")}} 或者 {{jsxref("String.prototype.substr()")}}），会导致错误（如果没有相应的属性或方法时）或返回不是期望的结果（如果存在相应的属性或方法）。如果想要将 <code>Selection</code> 对象作为一个字符串使用，请直接调用 <code>toString()</code> <span style="font-family: 'Courier New','Andale Mono',monospace; line-height: 1.5;">方法：</span></p>

<pre class="brush:js;gutter:false; notranslate">var selectedText = selObj.toString();</pre>

<ul>
 <li><code>selObj</code> 是一个<code>Selection</code> 对象，</li>
 <li><code>selectedText</code> 是一个字符串（被选中的文本）。</li>
</ul>

<h3 id="相关对象">相关对象</h3>

<ul>
</ul>

<p>你还可以使用 {{domxref("Document.getSelection()")}}，两个方法等价。</p>

<p>值得注意的是，目前在Firefox, Edge (非 Chromium 版本) 及 Internet Explorer 中，<code>getSelection()</code> 对 {{htmlelement("textarea")}} 及 {{htmlelement("input")}} 元素不起作用。 {{domxref("HTMLInputElement.setSelectionRange()")}} 或 <code>selectionStart</code> 及 <code>selectionEnd</code> 属性可用于解决此问题。</p>

<p>还要注意选择不同于焦点（详见 <a href="/zh-CN/docs/Web/API/Selection#Selection_%E5%8F%8A%E8%BE%93%E5%85%A5%E7%84%A6%E7%82%B9">Selection 及输入焦点</a>）。可使用{{domxref("Document.activeElement")}} 来返回当前的焦点元素.</p>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<p>{{Compat("api.Window.getSelection")}}</p>

<h2 id="See_also" name="See_also">相关链接</h2>

<ul>
 <li><a href="https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections" style="line-height: 1.5;">HTML Editing API</a></li>
 <li>{{domxref("Selection")}}</li>
 <li>{{domxref("Range")}}</li>
 <li>{{domxref("Document.getSelection()")}}</li>
</ul>

<div id="gtx-anchor" style="position: absolute; left: 108px; top: 24px; width: 144.625px; height: 17px;"></div>

<div class="jfk-bubble gtx-bubble" style="left: 58px; top: 27px; opacity: 1;">
<div class="jfk-bubble-content-id" id="bubble-3">
<div id="gtx-host" style="max-width: 400px;"></div>
</div>

<div class="jfk-bubble-closebtn-id jfk-bubble-closebtn"></div>

<div class="jfk-bubble-arrow-id jfk-bubble-arrow jfk-bubble-arrowup" style="left: 52.5px;">
<div class="jfk-bubble-arrowimplbefore"></div>

<div class="jfk-bubble-arrowimplafter"></div>
</div>
</div>
